\section{Постановка задачи}\label{sec:task_statement}

Задача многокритериальной оптимизации формулируется в следующем виде: 

\begin{align*}
    \text{min}_{x} f \triangleq (f_1(x), ..., f_m(x))^T & \tag{$T_0$}\label{opt:T0}\\
    \text{s.t.} &~ x\in K 
\end{align*}

Где $x\in \mbR^n$. Набор целевых функций $f_i: \mbR^n \rightarrow \mbR_{++} ~~ i = \overline{1, m}$. Допустимое множество $K$ рассматриваем выпуклое, непустое и компактное. Например, подходит множество с линейными ограничениями вида $K = \{x\in \mbR^n:~ Ax\leq b\}$. Также $K$ оснащено нормой $\|\cdot\|: K \rightarrow \mbR$.

Остается определить, что понимается под минимальностью, ведь в задаче дана вектор-функция. Один подход -- использовать Парето оптимальность. Однако Парето оптимальных точек может быть бесконечно много. Мы хотим получить одно решение, которое будет удовлетворять заданному хорошо интерпретируемому свойству. Далее считаем, что функции имеют положительные значения и их нужно минимизировать. Такими являются, например, функции, отражающие траты на производство. Рассмотрим понятие конкурентного решения, чтобы определить  свойства оптимального решения.

\begin{definition}[Гамма конкурентное решение (старое определение)] %\label{def:gamma_competitive}
     Пусть $x_i = \text{arg}\min_{x} f(x)$. Обозначим значение функции в этой точке $f_i^* = f_i(x_i)$. Тогда точка $x$ называется $\gamma$-конкурентным решением для набора функций $f_i$ если  $\forall i = \overline{i,m}$:
    $$
    f(x) \leq (1 + \gamma) f_i^*
    $$
\end{definition}

Это распространенное определение конкурентного решения. Приведем пример, демонстрирующий недостаток такого подхода:

\begin{comments}\label{example:1}
    Пусть служба доставки работала в течение нескольких периодов с разными стратегиями. Стратегия задается точкой $x_i$. Для этих точек были посчитаны метрики $f_k(x_i)$. Нужно выбрать стратегию для следующего периода. Компания не знает, как может развиться ситуация на рынке. Однако, она может выбрать такую стратегию, которая бы показывала результаты не сильно хуже на уже известных способах развития ситуации.
\end{comments}

В данном случае мы не можем использовать приведенное выше определение конкурентности, поскольку у нас нет информации об оптимальности действий компании в исторических данных. Поэтому в новом определении конкурентности мы исключаем требование оптимальности в сравниваемых точках:

\begin{definition}[$\gamma$ конкурентное решение]\label{def:gamma_competitive}
    Пусть $x_i: f_i(x_i) = v_i$. Тогда точка $x$ называется $\gamma$-конкурентным решением для функций  $f_i$ в точках $x_i$ если $\forall i = \overline{i,m}$:
    $$
    f(x) \leq (1 + \gamma) \tvi
    $$
\end{definition}

Введем определение оптимального решения на основе этого свойства. Конкурентное решение с показателем $\gamma$ это "достаточно хорошее" решение с точки зрения нашего нынешнего понимания значений целевых функций. Это определение перекликается с тем, как ставятся задачи на практике. Есть уже исторические данные как работала система, метрики посчитаны. Нужно найти решение, которое удовлетворяет новому свойству и портит метрики как можно меньше. Чтобы записать задачу оптимизации сопоставим каждой функции $f_i$ точку $x_i$. Обозначим $v_i = f_i(x_i)$. Ставим задачу:
\begin{align*}
    \min_{x, \gamma} \gamma & \tag{$T_1$}\label{opt:T1} \\    
    \text{s.t. } & x \in K \\
                 &f_i(x) \leq (1 + \gamma) v_i ~~ \text{for} i\in\overline{1, m}
\end{align*}

Таким образом, цель оптимизации состоит в том, чтобы найти $\gamma$-конкурентную точку, которая удовлетворяет необходимым свойствам и дает лучший параметр $\gamma$ для известных заданных значений. Также, если $K$ это ограничение на бюджет, то решение интерпретируется как робастное решение для заданного бюджета. В поставленной задаче нет дополнительных параметров, что делает ее более конкретной.

\subsection{Связь с другими работами}
Как было отмечено ранее, постановка \ref{opt:T1} тесно связана с подходом, который предлагается в \cite{gembicki1975approach}. Приведем ее:
\begin{align*}
    \min_{x, \gamma} \gamma & \tag{$T_1$}\label{opt:T1} \\    
    \text{s.t. } & x \in K \\
                 &f_i(x) - w_i \gamma \leq f_i^* ~~ \text{for}~~ i\in\overline{1, m}
\end{align*}

$f_i^*$ интерпретируются как целевые значения для оптимизируемых функций. Они не обязательно связаны с какой-то точкой, и могут быть взяты из других соображений.  $ w_i$ -- относительная важность изменения $i$ ой функции. По сути $w_i$ задает направление, в котором могут меняться функции. Данная задача сводится к нашей взятием параметров $w_i= f_i^* = v_i$.  Основное отличие нашей постановки от этой -- то что мы связываем задачу оптимизации со значениями функций в заданных точках. Это будет использоваться для поиска приближенного решения для случая Липшицевых функций, к чему мы и переходим.

\subsection{Мотивация поиска приближенного решения}
\begin{definition}[Липшицева фукция] \label{def:lipschitz_function}
    Функция $f : \mbR^n \rightarrow \mbR+$ называется липшицевой на $K$ с нормой $\|\cdot\|$:  
    $$
    \exists L > 0: ~ \forall x, y \in K:~  |f(x) - f(y) | \le L \|x -y\|
    $$
    $L$ -- константа Липшица.
\end{definition}

В случае, когда итеративный поиск оптимальной точки невозможен или крайне трудозатратен, мы предлагаем метод приближенного решения поставленной задачи для липшицевых функций.  Подобные задачи возникают, например в сетевой оптимизации: современные задачи из этой области имеют большие размеры и могут быть выражены в виде задач линейной оптимизации \cite{banos1995linear, martin2012large}. Согласно \cite{mangasarian1987lipschitz} задачи типа линейного программирования удовлетворяют условиям Липшица по параметрам $b$ в ограничении $Ax \leq b$. Мы приводим пример такой задачи в разделе с экспериментами \ref{sec:experiments}.

\section{Предлагаемый метод аппроксимации}\label{sec:method}
Соберем все обозначения вместе. Для каждого $i = \overline{1, m}$ дана функция $f_i(x):\mbR^n \rightarrow\mbR_{++}$, которую 
необходимо минимизировать, Она \hyperref[def:lipschitz_function]{липшицева} с константами $L_i$ и вычислена в точке $x_i:f_i(x_i) = v_i$. Мы ищем $x \in K$ и $\gamma$, которые выполнимы для \ref{opt:T1}. Как мы уже упоминали, метод не должен вычислять функции при поиске решения. К тому же, при сделанных предположениях \ref{opt:T1} не обязательно выпуклая. Остается воспользоваться только липшицевостью. Рассмотрим некоторые $x\in K$ и $\gamma$, для которых выполнено:

\begin{equation}
    \|x_i - x\| \leq \frac{\gamma v_i}{L_i}  \Rightarrow \\
    |v_i - f(x)| \leq \gamma v_i
\end{equation}

Тогда выполняется одна из альтернатив:

\begin{enumerate}
    \item $v_i >= f_i(x)$:
        \begin{equation}
            f_i(x) < (1 + \gamma) v_i
        \end{equation}
    \item  $v_i >= f_i(x)$:
        \begin{equation}
            f_i(x) < v_i < (1 + \gamma) v_i
        \end{equation}
\end{enumerate}
% даны $x_i$ в которых $f_i(x_i) = v_i$. Решение ищется на множестве $K$ с нормой $\|\cdot\|$.


То есть получаются условия из задачи \ref{opt:T1}, тогда рассмотренные $x, \gamma$ -- выполнимые точки. А $x$ -- $\gamma$-конкурентная точка для заданных функций и точек. Введем новую задачу оптимизации:

\begin{align*}
    \min_{x, \gamma} \gamma & \tag{$T_2$}\label{opt:T2} \\
    \text{s.t. } &x \in K \\
                 &\| x - x_i\| \leq \frac{1}{L_i}(\gamma \tvi ) ~~ \forall i\in\overline{1,m}
\end{align*}

Это выпуклая задача оптимизации, решение которого -- $\gamma$-конкурентное решение на заданном множестве. Это приближение, и поэтому оно вернет значение хуже, чем точное решение задачи \ref{opt:T1}.

Мы можем ослабить ограничения, если имеем информацию о монотонности функции по параметрам. Это можно обнаружить, например, в задаче линейного программирования - функция монотонна по параметрам справа, поскольку их увеличение делает ограничения более мягкими. Для этого мы вводим $\clip_f: \mbR^n \times \mbR^n \rightarrow \mbR^n$ оператор для функции $f$:


\begin{equation}
    \clip_{f}(x, y)_i =         
    % \begin{align}
    \begin{cases}
    \max(x_i - y_i, 0) & f ~\text{возрастает по} ~i\text{-ому параметру} \\
    \max(y_i - x_i, 0) & f ~\text{убывает по} ~ i\text{-ому параметру} \\
    x_i - y_i & \text{иначе}
        
    \end{cases}
\end{equation}

\begin{figure}[!]
\begin{center}    
 \resizebox{0.5\textwidth}{!}{
\input{figures/tikz/demo_fig.tikz}
    } 
        \caption{Пусть функция $f$ уменьшается по первому и увеличивается по второму параметру, и нужно ее минимизировать. Функция посчитана в точке $y$. В этом случае оператор возвращает $\textbf{0}$ для точек в серой области. Для остальных точек оператор возвращает вектор, показанный на рисунке. Проекция выполняется по координатам. Затемненная область показывает область пространства, проекция из которой будет иметь норму, не превышающую $r$, указанную на рисунке.}
\end{center}
\label{fig:clip_demo}
\end{figure}

\hyperref[fig:clip_demo]{Рисунок 1} демонстрирует работу оператора.
Ставим задачу оптимизации, в которой разность заменена на оператор:

    \begin{align*}
    \min_{x, \gamma} \gamma & \tag{$T_3$}\label{opt:T3} \\
    \text{s.t. } &x \in K \\
                 &\|clip_{f_i}(x,x_i)\| \leq \frac{1}{L_i}(\gamma \tvi) ~~ \forall i\in\overline{1,m}
    \end{align*}


